---
import { Image } from "astro:assets";
import Silder1Desk from "../assets/banner/1.png";
import Silder1Mob from "../assets/banner/1_mobile.png";
import Silder2Desk from "../assets/banner/2.png";
import Silder2Mob from "../assets/banner/2_mobile.png";
import Silder3Desk from "../assets/banner/3.png";
import Silder3Mob from "../assets/banner/3_mobile.png";

const sliderImages = [
  {
    desktop: Silder1Desk,
    mobile: Silder1Mob,
    alt: "Casino Experience",
    isResponsive: true,
  },
  {
    desktop: Silder2Desk,
    mobile: Silder2Mob,
    alt: "Casino Experience",
    isResponsive: true,
  },
  {
    desktop: Silder3Desk,
    mobile: Silder3Mob,
    alt: "Casino Experience",
    isResponsive: true,
  },
];
---

<section class="hero-section">
  <div class="hero-slider scroller">
    <a href="#contact-cta">
      <div class="slider-container">
        {
          sliderImages.map((slide, index) => (
            <div class="slide" data-index={index}>
              {slide.isResponsive ? (
                <>
                  <Image
                    src={slide.desktop}
                    alt={slide.alt}
                    width={1600}
                    height={600}
                    quality={90}
                    class="slider-image desktop-image"
                  />
                  <Image
                    src={slide.mobile}
                    alt={slide.alt}
                    width={480}
                    height={600}
                    quality={90}
                    class="slider-image mobile-image"
                  />
                </>
              ) : (
                <Image
                  src={slide.image}
                  alt={slide.alt}
                  width={1400}
                  height={600}
                  quality={90}
                  class="slider-image"
                />
              )}
            </div>
          ))
        }
      </div>
    </a>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Disable JS animation for mobile â€” only use for desktop
    if (window.innerWidth <= 768) return;

    const slides = document.querySelectorAll(".slide");
    let currentSlide = 0;
    const slideCount = slides.length;

    function updateSlider() {
      slides.forEach((slide, index) => {
        slide.style.transform = `translateX(${100 * (index - currentSlide)}%)`;
        slide.style.opacity = index === currentSlide ? "1" : "0";
      });
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % slideCount;
      updateSlider();
    }

    // Initialize slider for desktop
    updateSlider();

    // Auto-advance every 3s
    setInterval(nextSlide, 3000);
  });
</script>

<style>
  .hero-section {
    width: 100%;
    padding: 0 1rem;
    margin: 0;
    box-sizing: border-box;
    margin-top: 174px;
    position: relative;
    z-index: 1;
  }

  .hero-slider {
    position: relative;
    max-width: 1600px;
    width: 100%;
    margin: 0 auto;
    height: min(600px, 70vh);
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }

  .slider-container {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transition: all 0.5s ease;
    opacity: 0;
  }

  .slide[data-index="0"] {
    opacity: 1;
  }

  .slider-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .desktop-image {
    display: block;
  }

  .mobile-image {
    display: none;
  }

  /* MOBILE STYLES */
  @media (max-width: 768px) {
    .hero-section {
      padding: 0 0.5rem;
      margin-top: 144px;
    }

    .hero-slider {
      height: min(400px, 60vh);
      border-radius: 4px;
    }

    .desktop-image {
      display: none;
    }

    .mobile-image {
      display: block;
    }

    /* Enable swipe */
    .slider-container {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }

    .slide {
      flex: 0 0 100%;
      scroll-snap-align: start;
      position: relative;
      opacity: 1 !important; /* all visible for swipe */
      transform: none !important; /* disable JS transform */
    }
  }

  @media (max-width: 480px) {
    .hero-section {
      margin-top: 134px;
    }

    .hero-slider {
      height: min(500px, 50vh);
    }
  }
</style>
